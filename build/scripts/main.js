function getTask(){var t=getQueryParams(document.location.search);id=t.id;for(var e=JSON.parse(localStorage.getItem("tasks")),a=0;a<e.length;a++)e[a].id==id&&($("#edit-task-form #task_id").val(e[a].id),$("#edit-task-form #task").val(e[a].task),$("#edit-task-form #priority").val(e[a].task_priority),$("#edit-task-form #date").val(e[a].task_date),$("#edit-task-form #time").val(e[a].task_time))}function getQueryParams(t){t=t.split("+").join(" ");for(var e,a={},s=/[?&]?([^=]+)=([^&]*)/g;e=s.exec(t);)a[decodeURIComponent(e[1])]=decodeURIComponent(e[2]);return a}$(document).ready(function(){function t(){var t=JSON.parse(localStorage.getItem("tasks"));null!=t&&(t=t.sort(e));null!=localStorage.getItem("tasks")&&$.each(t,function(t,e){$("#task-table").append('<tr id="'+e.id+'"><td>'+e.task+"</td><td>"+e.task_priority+"</td><td>"+e.task_date+"</td><td>"+e.task_time+'</td><td><a href="edit.html?id='+e.id+'" role="button">Edit</a> | <a href="#" id="remove-task" data-id="'+e.id+'" role="button">Remove</a></td></tr>')})}function e(t,e){var a=t.task_time,s=e.task_time;return s>a?-1:a>s?1:0}function a(t){var e=new Date;id=e.getTime();var a=$("#task").val(),s=$("#priority").val(),o=$("#date").val(),i=$("#time").val();if(""==a)alert("Task is required"),t.preventDefault();else if(""==o)alert("Date is required"),t.preventDefault();else if(""==i)alert("Time is required"),t.preventDefault();else if(""==s)s="normal";else{tasks=JSON.parse(localStorage.getItem("tasks")),null==tasks&&(tasks=[]);var r=(JSON.parse(localStorage.getItem("tasks")),{id:id,task:a,task_priority:s,task_date:o,task_time:i});tasks.push(r),localStorage.setItem("tasks",JSON.stringify(tasks)),console.log("Task Added")}}function s(t){var e=$("#task_id").val(),a=$("#task").val(),s=$("#priority").val(),o=$("#date").val(),i=$("#time").val();l=JSON.parse(localStorage.getItem("tasks"));for(var r=0;r<l.length;r++)l[r].id==e&&l.splice(r,1),localStorage.setItem("tasks",JSON.stringify(l));if(""==a)alert("Task is required"),t.preventDefault();else if(""==o)alert("Date is required"),t.preventDefault();else if(""==i)alert("Time is required"),t.preventDefault();else if(""==s)s="normal";else{tasks=JSON.parse(localStorage.getItem("tasks")),null==tasks&&(tasks=[]);var l=JSON.parse(localStorage.getItem("tasks")),n={id:e,task:a,task_priority:s,task_date:o,task_time:i};tasks.push(n),localStorage.setItem("tasks",JSON.stringify(tasks))}}function o(t){if(confirm("Are you sure you want to delete this task?")){for(var e=JSON.parse(localStorage.getItem("tasks")),a=0;a<e.length;a++)e[a].id==t&&e.splice(a,1),localStorage.setItem("tasks",JSON.stringify(e));location.reload()}}function i(){confirm("Do you want to clear all tasks?")&&(localStorage.clear(),location.reload())}navigator.geolocation?console.log("Geolocation is supported!"):console.log("Geolocation is not supported for this Browser/OS version yet.");var r,l=function(t){r=t,console.log(t),document.getElementById("startLat").innerHTML="Latitude "+r.coords.latitude,document.getElementById("startLon").innerHTML="Longitude "+r.coords.longitude};navigator.geolocation.getCurrentPosition(l),$("#add-task-form").on("submit",function(t){a(t)}),$("#edit-task-form").on("submit",function(t){s(t)}),$("#task-table").on("click","#remove-task",function(){id=$(this).data("id"),o(id)}),$("#clear-tasks").on("click",function(){i()}),t()});